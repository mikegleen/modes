<?xml version="1.0" encoding="iso-8859-1"?>
<xupdate:modifications xmlns:xupdate="http://www.xmldb.org/xupdate"><xupdate:variable name="normallocation" select="/Object/ObjectLocation[@elementtype='normal location']/Location"/><xupdate:append select="/Object[ObjectIdentity/Number/text()='{object_number}']/[not(ObjectLocation)]"><ObjectLocation elementtype="current location"><Location>not recorded</Location><Date><DateBegin>{date_begin}</DateBegin><DateEnd/></Date></ObjectLocation><ObjectLocation elementtype="normal location"><Location>not recorded</Location></ObjectLocation></xupdate:append><xupdate:insert-before select="/Object[ObjectIdentity/Number/text()='{object_number}']/[not(ObjectLocation[@elementtype='current location'])]/ObjectLocation[1]"><ObjectLocation elementtype="current location"><Location>not recorded</Location><Date><DateBegin>{date_begin}</DateBegin><DateEnd/></Date></ObjectLocation></xupdate:insert-before><xupdate:insert-after select="/Object[ObjectIdentity/Number/text()='{object_number}']/[not(ObjectLocation[@elementtype='normal location'] or ObjectLocation[@elementtype='home location'])]/ObjectLocation[position()=last()]"><ObjectLocation elementtype="normal location"><Location>not recorded</Location></ObjectLocation></xupdate:insert-after><xupdate:update select="/Object[ObjectIdentity/Number/text()='{object_number}']/ObjectLocation[@elementtype='current location']/Date/DateEnd">{date_begin}</xupdate:update><xupdate:append select="/Object[ObjectIdentity/Number/text()='{object_number}']/ObjectLocation[@elementtype='current location']"><xupdate:attribute name="elementtype">previous location</xupdate:attribute></xupdate:append><xupdate:insert-before select="/Object[ObjectIdentity/Number/text()='{object_number}']/ObjectLocation[1]"><ObjectLocation elementtype="current location"><Location>{new_location}</Location><Date><DateBegin>{date_begin}</DateBegin><DateEnd/></Date></ObjectLocation></xupdate:insert-before></xupdate:modifications>